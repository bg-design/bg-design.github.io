<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Balloon Tab Bar with Animated Dock</title>

    <!-- Add markdown parser library -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>


  <style>
    html, body {
      height: 100%;
    }
    body {
      margin: 0;
      background:
        repeating-linear-gradient(135deg, #f7f7f7 0px, #f7f7f7 8px, #ededed 8px, #ededed 16px),
        linear-gradient(120deg, #f7f7f7 0%, #ededed 100%);
      font-family: Helvetica, Arial, sans-serif;
      color: #222;
      padding: 20px;
      padding-bottom: 120px;
      /* Prevent iOS Safari bouncing */
      -webkit-overflow-scrolling: auto;
      overscroll-behavior: none;
      overflow-x: hidden;
    }

    .content {
      padding-bottom: 120px; /* Padding for space for balloon */
    }
   
   [data-theme="dark"] body {
      background:
        repeating-linear-gradient(135deg, #23272b 0px, #23272b 8px, #262a2e 8px, #262a2e 16px),
        linear-gradient(120deg, #23272b 0%, #23272b 100%);
      color: #00AEEF;
   }
   [data-theme="dark"] .content, [data-theme="dark"] .markdown-content {
  color: #eee;
}

[data-theme="dark"] .content p {
  background: initial;
}

[data-theme="dark"] .markdown-content {
  background: rgb(42 43 50);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.24);
}
[data-theme="dark"] .markdown-content p {
  color: #eee;
}
[data-theme="dark"] .markdown-content li {
  color: #eee;
}
[data-theme="dark"] .markdown-content h3 {
  color: #eee;
}
   [data-theme="dark"] .portfolio-page {
      color: #39B54A;
   }
   [data-theme="dark"] .about-page {
      color: #EC008C;
   }
   [data-theme="dark"] .pricing-page {
      color: #FFCB05;
   }
   [data-theme="dark"] .projectTile {
      color: #222;
      background: #3d444e;
   }
   [data-theme="dark"] .projectInfo h3 {
      color: #39B54A;
   }
   [data-theme="dark"] .projectInfo p {
      color: #eee;
   }
   [data-theme="dark"] .projectInfo button {
      color: #39B54A;
      border-color: #39B54A;
      background: none;
   }
   [data-theme="dark"] .projectInfo button:hover {
      background: #39B54A;
      color: #23272b;
   }
   [data-theme="dark"] .tab-bar {
      background: linear-gradient(120deg, #23272b 80%, #262a2e 100%);
      box-shadow: 0 8px 32px rgba(0,0,0,0.44), 0 2px 8px rgba(0,0,0,0.18);
      border: none;
   }
   [data-theme="dark"] .tab-bar:hover, [data-theme="dark"] .tab-bar:focus-within {
      box-shadow: 0 20px 60px rgba(0,0,0,0.38), 0 4px 16px rgba(57,181,74,0.18), 0 0 0 2px #fff;
      background: linear-gradient(120deg, #262a2e 60%, #23272b 100%);
      border: none;
   }
   [data-theme="dark"] #modeSwitch {
      background: #23272b;
      color: #fff;
   }
   
   [data-theme="dark"] .header-logo {
      color: #00AEEF !important;
   }
   
   [data-theme="dark"] .header-logo img {
      content: url('IMG/nd-logo-v2c-invert.png');
      opacity: 0.8;
      border-radius: 50%;
   }
   
   .header-logo:hover {
      opacity: 0.8;
   }
   [data-theme="light"] body {
      background:
        repeating-linear-gradient(135deg, #f7f7f7 0px, #f7f7f7 8px, #ededed 8px, #ededed 16px),
        linear-gradient(120deg, #f7f7f7 0%, #ededed 100%);
      color: #222;
   }
   [data-theme="light"] .content, [data-theme="light"] .markdown-content {
      color: #222;
   }
   [data-theme="light"] .markdown-content h1 {
      color: #00AEEF;
      border-bottom: 3px solid #00AEEF;
   }
   [data-theme="light"] .markdown-content h2 {
      color: #00AEEF;
   }
   [data-theme="light"] .markdown-content h3 {
      color: #555;
   }
   [data-theme="light"] .markdown-content strong {
      color: #00AEEF;
   }
   [data-theme="light"] .markdown-content p {
      color: #222;
   }
   [data-theme="light"] .markdown-content li {
      color: #222;
   }
   [data-theme="light"] .accordion-header {
      background: #f7f7f7;
      color: #00AEEF;
   }
   [data-theme="light"] .accordion-header.active, [data-theme="light"] .accordion-header:hover {
      background: #e0f7fa;
      color: #00AEEF;
   }
   [data-theme="light"] .accordion-content {
      background: #fafbfc;
      color: #222;
   }
   [data-theme="light"] .accordion-content ul, [data-theme="light"] .accordion-content p, [data-theme="light"] .accordion-content li {
      color: #222;
   }
   [data-theme="light"] .accordion-icon {
      color: #00AEEF;
   }
   [data-theme="light"] .projectTile {
      color: #222;
   }
   [data-theme="light"] .projectInfo h3 {
      color: #39B54A;
   }
   [data-theme="light"] .projectInfo p {
      color: #333;
   }
   [data-theme="light"] .projectInfo button {
      color: #39B54A;
      border-color: #39B54A;
      background: none;
   }
   [data-theme="light"] .projectInfo button:hover {
      background: #39B54A;
      color: #fff;
   }
   [data-theme="light"] .tab-bar {
      background: linear-gradient(120deg, #fff 80%, #f7f7f7 100%);
      box-shadow: 0 8px 32px rgba(0,0,0,0.22), 0 2px 8px rgba(0,0,0,0.10);
      border: none;
   }
   [data-theme="light"] .tab-bar:hover, [data-theme="light"] .tab-bar:focus-within {
      box-shadow: 0 16px 48px rgba(0,0,0,0.28), 0 4px 16px rgba(0,0,0,0.10), 0 0 0 2px #fff;
      background: linear-gradient(120deg, #f7f7f7 60%, #fff 100%);
      border: none;
   }
   [data-theme="light"] #modeSwitch {
  background: #eee;
  color: #222;
}

/* Override light mode colors for page-specific themes */
[data-theme="light"] .about-page h1, [data-theme="light"] .about-page h2, [data-theme="light"] .about-page h3, [data-theme="light"] .about-page h4, [data-theme="light"] .about-page h5, [data-theme="light"] .about-page h6 {
  color: #EC008C !important;
}
[data-theme="light"] .about-page h1 {
  border-bottom: 3px solid #EC008C !important;
}
[data-theme="light"] .about-page strong {
  color: #EC008C !important;
}
[data-theme="light"] .pricing-page h1, [data-theme="light"] .pricing-page h2, [data-theme="light"] .pricing-page h3, [data-theme="light"] .pricing-page h4, [data-theme="light"] .pricing-page h5, [data-theme="light"] .pricing-page h6 {
  color: #FFCB05 !important;
}
[data-theme="light"] .pricing-page h1 {
  border-bottom: 3px solid #FFCB05 !important;
}
[data-theme="light"] .pricing-page strong {
  color: #FFCB05 !important;
}
[data-theme="light"] .portfolio-page h1, [data-theme="light"] .portfolio-page h2, [data-theme="light"] .portfolio-page h3, [data-theme="light"] .portfolio-page h4, [data-theme="light"] .portfolio-page h5, [data-theme="light"] .portfolio-page h6 {
  color: #39B54A !important;
}
[data-theme="light"] .portfolio-page h1 {
  border-bottom: 3px solid #39B54A !important;
}
[data-theme="light"] .portfolio-page strong {
  color: #39B54A !important;
}

/* Pricing Package Styles */
.pricing-packages {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: 32px;
  margin: 40px 0;
}

.pricing-package {
  background: #f7f7f7;
  border-radius: 16px;
  padding: 0 0 32px 0;
  box-shadow: 0 8px 32px rgba(0,0,0,0.12), 0 2px 8px rgba(0,0,0,0.08);
  transition: transform 0.2s, box-shadow 0.2s;
  border: 2px solid transparent;
}

.pricing-package:hover {
  transform: translateY(-4px);
  box-shadow: 0 16px 48px rgba(0,0,0,0.18), 0 4px 16px rgba(0,0,0,0.12);
}

.pricing-package h3 {
  color: #FFCB05;
  font-size: 1.5rem;
  margin: 0 0 4px 0;
  text-align: center;
}

.pricing-package .price {
  font-family: 'Courier Prime', Courier, monospace;
  font-weight: 400;
  font-size: 0.95rem;
  color: #888;
  letter-spacing: 0.02em;
  margin: 0 0 12px 0;
  text-align: center;
}

.pricing-package .subtitle {
  color: #666;
  font-size: 0.9rem;
  text-align: center;
  margin-bottom: 24px;
  font-style: italic;
}

.pricing-package ul {
  list-style: none;
  padding: 0;
  margin: 0 0 24px 0;
}

.pricing-package ul li {
  list-style: none;
  position: relative;
  padding-left: 1.6em;
  font-size: 1rem;
  line-height: 1.5;
}

.pricing-package ul li::before {
  content: '\2713';
  color: #FFCB05;
  position: absolute;
  left: 0;
  font-size: 1.1em;
  line-height: 1;
  top: 0.3em;
}

.pricing-package li:last-child {
  border-bottom: none;
}



[data-theme="dark"] .pricing-package {
  background: #23272b;
  box-shadow: 0 8px 32px rgba(0,0,0,0.24), 0 2px 8px rgba(0,0,0,0.16);
}

[data-theme="dark"] .pricing-package:hover {
  box-shadow: 0 16px 48px rgba(0,0,0,0.32), 0 4px 16px rgba(0,0,0,0.24);
}

[data-theme="dark"] .pricing-package .subtitle {
  color: #aaa;
}

[data-theme="dark"] .pricing-package li {
  color: #eee;
  border-bottom-color: #333;
}

@media (min-width: 1200px) {
  .pricing-packages {
    grid-template-columns: repeat(3, 1fr);
  }
}

@media (max-width: 1199px) and (min-width: 768px) {
  .pricing-packages {
    grid-template-columns: repeat(2, 1fr);
  }
}

    @media (max-width: 767px) {
      .pricing-packages {
        grid-template-columns: 1fr;
      }
    }

    /* Intake Modal Styles */
    .intake-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.9);
      z-index: 1000;
      display: none;
      align-items: center;
      justify-content: center;
      backdrop-filter: blur(5px);
    }

    .intake-modal.active {
      display: flex;
    }

    .intake-modal-content {
      position: relative;
      width: 100%;
      height: 100%;
      background: white;
      border-radius: 0;
      overflow: hidden;
    }

    .intake-close-btn {
      position: absolute;
      top: 20px;
      right: 20px;
      width: 50px;
      height: 50px;
      border: none;
      background: rgba(255, 255, 255, 0.9);
      color: #333;
      font-size: 24px;
      font-weight: bold;
      border-radius: 50%;
      cursor: pointer;
      z-index: 1001;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: all 0.2s ease;
    }

    .intake-close-btn:hover {
      background: white;
      transform: scale(1.1);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.2);
    }

    .intake-modal iframe {
      width: 100%;
      height: 100%;
      border: none;
    }
    .content p {
      max-width: 600px;
      margin: 20px auto;
      line-height: 1.6;
      padding: 20px;
      border-radius: 12px;
      background: white;
      backdrop-filter: blur(10px);
    }
    :root {
      --bg: #fff;
      --bar-bg: #fff;
      --text: #000;
    }
    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #000;
        --bar-bg: #222;
        --text: #fff;
      }
    }
    .tab-bar-wrapper {
      position: fixed;
      left: 0;
      width: 100%;
      pointer-events: none;
      z-index: 30;
      bottom: 0;
      transition: bottom 0.8s ease;
    }
    .tab-bar-wrapper.active {
      bottom: 80%;
    }
    .tab-bar {
      position: absolute;
      left: 50%;
      bottom: 20px;
      transform: translateX(-50%);
      background: var(--bar-bg);
      border-radius: 20px;
      padding: 15px 30px;
      box-shadow: 0 8px 32px rgba(0,0,0,0.22), 0 2px 8px rgba(0,0,0,0.10);
      display: flex;
      gap: 40px;
      pointer-events: auto;
      transition: transform 0.5s ease, box-shadow 0.3s, background 0.3s;
      border: none;
    }
    .tab-bar:hover, .tab-bar:focus-within {
      box-shadow: 0 16px 48px rgba(0,0,0,0.28), 0 4px 16px rgba(0,0,0,0.10), 0 0 0 2px #fff;
      background: linear-gradient(120deg, #f7f7f7 60%, #fff 100%);
      border: none;
    }
    .tab-bar::before, .tab-bar::after {
      content: '';
      position: absolute;
      left: 50%;
      width: 2px;
      background: #d7d7d7;
      transform: translateX(-50%);
      z-index: -1;
    }
    .tab-bar::before {
      top: -100px;
      height: 100vh;
    }
    .tab-bar.hidden {
      transform: translate(-50%, 150%);
      transition: 0.5s;
    }
    .tab-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-decoration: none;
      font-weight: bold;
      font-size: 12px;
      cursor: pointer;
    }

    .tab-item:not(.active) {
      filter: grayscale(100%);
      opacity: 0.6;
      transition: filter 0.3s, opacity 0.3s;
      color:grey;
    }

    .tab-item.active {
      filter: grayscale(0%);
      opacity: 1;
      color:inherit;
    }

    .tab-item img {
      height: 30px;
      margin-bottom: 5px;
    }
    .process { color: #00AEEF; }

    .process-blue {color:rgb(0, 174, 239)}
    .about { color: #EC008C; }
    .portfolio { color: #39B54A; }
    .pricing { color: #FFCB05; }
    .balloon {
      position: absolute;
      top: -120px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: auto;
      z-index: 35;
      cursor: pointer;
      animation: float 3s ease-in-out infinite;
      filter: drop-shadow(0 8px 16px rgba(0,0,0,0.3));
    }
    
    @keyframes float {
      0%, 100% {
        transform: translateX(-50%) translateY(0px);
      }
      50% {
        transform: translateX(-50%) translateY(-10px);
      }
    }
    .booking-page {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100vw;
      height: 80%;
      background: #333;
      transform: translateY(100%);
      transition: transform 0.7s ease-in;
      z-index: 50;
      padding: 40px;
      box-shadow: 0 -10px 40px rgba(0,0,0,0.2);
      overflow-y: auto;
      box-sizing: border-box;
    }
    
    /* Floating background balloons */
    .bg-balloon {
      position: absolute;
      width: 40px;
      height: 50px;
      border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
      opacity: 0.15;
      z-index: 1;
      pointer-events: none;
      bottom: -60px;
      animation: float-up 8s linear infinite;
    }
    
    .bg-balloon::after {
      content: '';
      position: absolute;
      bottom: -25px;
      left: 50%;
      transform: translateX(-50%);
      width: 2px;
      height: 25px;
      background: rgba(255,255,255,0.3);
      animation: sway-string 3s ease-in-out infinite;
      transform-origin: top center;
    }
    
    .bg-balloon:nth-child(1) {
      left: 10%;
      animation-delay: 0s;
    }
    
    .bg-balloon:nth-child(2) {
      left: 25%;
      animation-delay: 2s;
    }
    
    .bg-balloon:nth-child(3) {
      left: 40%;
      animation-delay: 4s;
    }
    
    .bg-balloon:nth-child(4) {
      left: 60%;
      animation-delay: 6s;
    }
    
    .bg-balloon:nth-child(5) {
      left: 80%;
      animation-delay: 1s;
    }
    
    .bg-balloon:nth-child(6) {
      left: 15%;
      animation-delay: 3s;
    }
    
    .bg-balloon:nth-child(7) {
      left: 70%;
      animation-delay: 5s;
    }
    
    .bg-balloon:nth-child(8) {
      left: 90%;
      animation-delay: 7s;
    }
    
    /* Color variations */
    .bg-balloon.color-1 {
      background: radial-gradient(circle at 30% 30%, rgba(255, 0, 0, 0.8), rgba(255, 0, 0, 0.3));
    }
    
    .bg-balloon.color-2 {
      background: radial-gradient(circle at 30% 30%, rgba(255, 165, 0, 0.8), rgba(255, 165, 0, 0.3));
    }
    
    .bg-balloon.color-3 {
      background: radial-gradient(circle at 30% 30%, rgba(255, 255, 0, 0.8), rgba(255, 255, 0, 0.3));
    }
    
    .bg-balloon.color-4 {
      background: radial-gradient(circle at 30% 30%, rgba(0, 255, 0, 0.8), rgba(0, 255, 0, 0.3));
    }
    
    .bg-balloon.color-5 {
      background: radial-gradient(circle at 30% 30%, rgba(0, 0, 255, 0.8), rgba(0, 0, 255, 0.3));
    }
    
    .bg-balloon.color-6 {
      background: radial-gradient(circle at 30% 30%, rgba(128, 0, 128, 0.8), rgba(128, 0, 128, 0.3));
    }
    
    .bg-balloon.color-7 {
      background: radial-gradient(circle at 30% 30%, rgba(255, 20, 147, 0.8), rgba(255, 20, 147, 0.3));
    }
    
    .bg-balloon.color-8 {
      background: radial-gradient(circle at 30% 30%, rgba(0, 255, 255, 0.8), rgba(0, 255, 255, 0.3));
    }
    
    @keyframes float-up {
      0% {
        transform: translateY(0px);
        opacity: 0;
      }
      10% {
        opacity: 0.15;
      }
      90% {
        opacity: 0.15;
      }
      100% {
        transform: translateY(-100vh);
        opacity: 0;
      }
    }
    
    @keyframes sway-string {
      0%, 100% {
        transform: translateX(-50%) rotate(-5deg);
      }
      50% {
        transform: translateX(-50%) rotate(5deg);
      }
    }
    .booking-page.open {
      transform: translateY(0);
    }
    .booking-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 20%;
      z-index: 25;
    }

    .bookingContent {
      max-width: 500px;
      text-align: center;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 35px 100px rgba(0,0,0,0.4), 0 15px 50px rgba(0,0,0,0.25), 0 5px 20px rgba(0,0,0,0.15);
      position: absolute;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      margin-left: 0;
      margin-right: 0;
      border: 3px solid;
      border-image: linear-gradient(135deg, #00AEEF, #EC008C, #39B54A, #FFCB05) 1;
      border-radius: 0px;
      animation: float 3s ease-in-out infinite;
      z-index: 10;
    }
    
    .bookingContent h2 {
      color: #00AEEF;
      font-size: 2.5em;
      margin-bottom: 30px;
      font-weight: bold;
    }
    
    /* Override tab color changes for booking content */
    .bookingContent,
    .bookingContent * {
      color: inherit;
    }
    
    .bookingContent h2,
    .bookingContent p:not([style*="color"]) {
      color: #00AEEF;
    }
    
    .bookingContent p[style*="color:#666"] {
      color: #666;
    }
    
    .phone-section {
      background: #00AEEF;
      border-radius: 15px;
      padding: 25px;
      margin: 20px 0;
      box-shadow: 0 15px 40px rgba(0,174,239,0.4), 0 8px 25px rgba(0,0,0,0.2), 0 4px 12px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .phone-section:hover,
    .phone-section:active {
      transform: translateY(-5px);
      box-shadow: 0 20px 50px rgba(0,174,239,0.5), 0 12px 35px rgba(0,0,0,0.25), 0 6px 18px rgba(0,0,0,0.15);
    }
    
    .phone-number {
      display: inline-block;
      background: #FFCB05;
      color: #333;
      padding: 15px 30px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: bold;
      font-size: 20px;
      box-shadow: 0 12px 35px rgba(255,203,5,0.6), 0 8px 25px rgba(0,0,0,0.3), 0 4px 15px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    
    .phone-number:hover,
    .phone-number:active {
      transform: scale(1.05);
      box-shadow: 0 18px 45px rgba(255,203,5,0.7), 0 12px 35px rgba(0,0,0,0.35), 0 6px 20px rgba(0,0,0,0.25);
    }
    
    .email-section {
      background: #EC008C;
      border-radius: 15px;
      padding: 25px;
      margin: 20px 0;
      box-shadow: 0 15px 40px rgba(236,0,140,0.4), 0 8px 25px rgba(0,0,0,0.2), 0 4px 12px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    
    .email-section:hover,
    .email-section:active {
      transform: translateY(-5px);
      box-shadow: 0 20px 50px rgba(236,0,140,0.5), 0 12px 35px rgba(0,0,0,0.25), 0 6px 18px rgba(0,0,0,0.15);
    }
    
    .email-link {
      display: inline-block;
      background: #39B54A;
      color: white;
      padding: 12px 25px;
      border-radius: 50px;
      text-decoration: none;
      font-weight: bold;
      font-size: 16px;
      box-shadow: 0 12px 35px rgba(57,181,74,0.6), 0 8px 25px rgba(0,0,0,0.3), 0 4px 15px rgba(0,0,0,0.2);
      transition: all 0.3s ease;
    }
    
    .email-link:hover,
    .email-link:active {
      transform: scale(1.05);
      box-shadow: 0 18px 45px rgba(57,181,74,0.7), 0 12px 35px rgba(0,0,0,0.35), 0 6px 20px rgba(0,0,0,0.25);
    }
    
    /* Jiggle animation for emojis */
    .phone-number:hover .emoji,
    .phone-number:active .emoji,
    .email-link:hover .emoji,
    .email-link:active .emoji {
      animation: jiggle 0.6s ease-in-out;
    }
    
    @keyframes jiggle {
      0%, 100% {
        transform: rotate(0deg);
      }
      25% {
        transform: rotate(-8deg);
      }
      75% {
        transform: rotate(8deg);
      }
    }
    
    /* Mobile Responsive Styles */
    @media (max-width: 768px) {
      .booking-page {
        height: 85%;
        padding: 50px 20px 20px 20px;
      }
      
      .bookingContent {
        bottom: 35px;
      }
      
      .bookingContent h2 {
        font-size: 1.8em;
        margin-bottom: 18px;
      }
      
      .phone-number {
        padding: 10px 18px;
        font-size: 16px;
      }
      
      .email-link {
        padding: 8px 16px;
        font-size: 13px;
      }
      
      .close-btn {
        top: 15px;
        left: 15px;
        padding: 10px 15px;
        font-size: 16px;
      }
    }
    
    @media (max-width: 480px) {
      .booking-page {
        height: 90%;
        padding: 40px 15px 15px 15px;
      }
      
      .bookingContent {
        bottom: 30px;
        width: 90vw;
        padding: 15px;
      }
      
      .bookingContent h2 {
        font-size: 1.6em;
        margin-bottom: 15px;
      }
      
      .phone-section,
      .email-section {
        padding: 15px;
        margin: 10px 0;
      }
      
      .phone-number {
        padding: 8px 14px;
        font-size: 14px;
      }
      
      .email-link {
        padding: 6px 12px;
        font-size: 12px;
      }
    }
    
    /* iPhone SE specific fixes */
    @media (max-width: 375px) {
      .booking-page {
        height: 92%;
        padding: 50px 10px 10px 10px;
      }
      
      .close-btn {
        top: 10px;
        left: 10px;
        padding: 8px 12px;
        font-size: 14px;
      }
      
      .bookingContent {
        width: 85vw;
        padding: 12px;
        bottom: 15px;
      }
      
      .bookingContent h2 {
        font-size: 1.4em;
        margin-bottom: 10px;
      }
      
      .phone-section,
      .email-section {
        padding: 12px;
        margin: 8px 0;
      }
    }
    
    /* Samsung Fold 5 and foldable devices */
    @media (max-width: 717px) and (min-height: 600px) {
      .booking-page {
        min-height: 620px;
        padding: 40px 20px 20px 20px;
        height: 74%;
      }
      
      .bookingContent {
        bottom: 40px;
        width: 80vw;
      }
      
      .tab-bar-wrapper.active {
        bottom: 70%;
      }
    }
    
    /* Tablets in landscape orientation */
    @media (min-width: 768px) and (max-width: 1366px) and (orientation: landscape) {
      .bookingContent {
        bottom: 40px;
      }

      .booking-page {
        height: 82%;
      }
    }

    .close-btn {
      background: rgba(47, 47, 47, 0.6);
      border: 1px solid rgba(255,255,255,0.3);
      color: #fff;
      font-size: 18px;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      margin-bottom: 20px;
      font-family: Helvetica, Arial, sans-serif;
      padding: 12px 20px;
      border-radius: 25px;
      transition: all 0.3s ease;
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 10;
    }

    .close-btn:hover,
    .close-btn:active {
      background: rgba(255,255,255,0.2);
      border-color: rgba(255,255,255,0.5);
      transform: translateY(-2px);
    }

     /* Add styles for markdown content */
     .markdown-content {
      max-width: 800px;
      margin: 0 auto;
      padding: 40px 20px;
      line-height: 1.6;
      background: white;
      border-radius: 16px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.12);
      backdrop-filter: blur(10px);
      margin-top: 20px;
    }
    
    /* Portfolio page specific container */
    .portfolio-page {
      max-width: 1400px !important;
    }
    
    .markdown-content h1 {
      color: #00AEEF;
      border-bottom: 3px solid #00AEEF;
      padding-bottom: 10px;
    }
    
    .markdown-content h2 {
      color: #00AEEF;
      margin-top: 40px;
      margin-bottom: 20px;
    }
    
    .markdown-content h3 {
      color: #555;
      margin-top: 30px;
    }
    
    .markdown-content ul {
      margin-bottom: 20px;
    }
    
    .markdown-content li {
      margin-bottom: 8px;
    }
    
    .markdown-content strong {
      color: #00AEEF;
    }
    
    .back-link {
      display: inline-block;
      margin-bottom: 30px;
      color: #888;
      text-decoration: none;
      font-weight: bold;
    }
    
    .back-link:hover {
      text-decoration: underline;
      color: #888;
    }
    
    /* Ensure back-link stays grey even in colored pages */
    .about-page .back-link,
    .pricing-page .back-link,
    .portfolio-page .back-link {
      color: #888;
    }
    
    .about-page .back-link:hover,
    .pricing-page .back-link:hover,
    .portfolio-page .back-link:hover {
      color: #888;
    }

    /* Page-specific color themes */
    .about-page {
      color: #EC008C;
    }
    
    .about-page h1, .about-page h2, .about-page h3, .about-page h4, .about-page h5, .about-page h6 {
      color: #EC008C;
    }
    
    .about-page h1 {
      border-bottom: 3px solid #EC008C;
    }
    
    .about-page strong {
      color: #EC008C;
    }
    
    .about-page a {
      color: #EC008C;
    }
    
    .about-page hr {
      border: none;
      border-top: 1px solid #EC008C;
      margin: 20px 0;
    }
    
    .pricing-page {
      color: #FFCB05;
    }
    
    .pricing-page h1, .pricing-page h2, .pricing-page h3, .pricing-page h4, .pricing-page h5, .pricing-page h6 {
      color: #FFCB05;
    }
    
    .pricing-page h1 {
      border-bottom: 3px solid #FFCB05;
    }
    
    .pricing-page strong {
      color: #FFCB05;
    }
    
    .pricing-page a {
      color: #FFCB05;
    }
    
    .pricing-page hr {
      border: none;
      border-top: 1px solid #FFCB05;
      margin: 20px 0;
    }
    
    .portfolio-page {
      color: #39B54A;
    }
    
    .portfolio-page h1, .portfolio-page h2, .portfolio-page h3, .portfolio-page h4, .portfolio-page h5, .portfolio-page h6 {
      color: #39B54A;
    }
    
    .portfolio-page h1 {
      border-bottom: 3px solid #39B54A;
    }
    
    .portfolio-page strong {
      color: #39B54A;
    }
    
    .portfolio-page a {
      color: #39B54A;
    }
    
    .portfolio-page hr {
      border: none;
      border-top: 1px solid #39B54A;
      margin: 20px 0;
    }

    /* Accordion styles for process page */
    .accordion { max-width: 600px; margin: 2em auto; }
    .accordion-item { border-bottom: 1px solid #eee; }
    .accordion-header {
      background: #f7f7f7;
      color: #00AEEF;
      font-weight: bold;
      width: 100%;
      text-align: left;
      padding: 1em;
      border: none;
      outline: none;
      cursor: pointer;
      transition: background 0.2s;
      font-size: 1.1em;
    }
    .accordion-header.active, .accordion-header:hover {
      background: #e0f7fa;
    }
    .accordion-content {
      display: none;
      padding: 1em;
      background: #fafbfc;
      animation: fadeIn 0.3s;
    }
    .accordion-content.open {
      display: block;
    }

    @media (prefers-color-scheme: dark) {
      .accordion {
        background: none;
      }
      .accordion-item {
        border-bottom: 1px solid #333;
      }
      .accordion-header {
        background: #181c20;
        color: #00AEEF;
      }
      .accordion-header.active, .accordion-header:hover {
        background: #23272b;
        color: #fff;
      }
      .accordion-content {
        background: #222;
        color: #eee;
      }
      .accordion-content ul, .accordion-content p, .accordion-content li, .accordion-content figcaption {
        color: #eee;
      }
      .accordion-content figcaption {
        color: #aaa;
      }
    }

    /* Accordion icon styles */
    .accordion-icon {
      font-size: 1.5em;
      font-weight: bold;
      margin-left: 0.5em;
      vertical-align: middle;
      transition: color 0.2s;
      color: #00AEEF;
    }
    @media (prefers-color-scheme: dark) {
      .accordion-icon {
        color: #fff;
      }
    }
    /* --- Portfolio Card Styles (from slick.html) --- */
    .portfolio-filters {
      display: flex;
      justify-content: center;
      gap: 12px;
      margin: 30px 0 20px 0;
      flex-wrap: wrap;
      align-items: center;
    }
    .portfolio-filter-btn {
      background: none;
      color: #888;
      border: none;
      border-radius: 0;
      padding: 10px 18px;
      font-size: 1rem;
      font-family: inherit;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 8px;
      transition: color 0.2s, border-bottom 0.2s;
      box-shadow: none;
      position: relative;
      outline: none;
    }
    .portfolio-filter-btn.active {
      color: #39B54A;
      border-bottom: 3px solid #39B54A;
      background: none;
      text-decoration: none;
    }
    .portfolio-filter-btn:not(.active):hover {
      color: #222;
      text-decoration: underline;
    }
    
    /* Advanced Filter Styles */
    .advanced-filters {
      display: flex;
      justify-content: center;
      gap: 16px;
      margin: 20px 0 30px 0;
      flex-wrap: wrap;
      align-items: center;
    }
    
    .filter-dropdown {
      position: relative;
      min-width: 140px;
    }
    
    .filter-dropdown select {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 10px 16px;
      font-size: 0.9rem;
      font-family: inherit;
      font-weight: 500;
      color: #333;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      width: 100%;
      outline: none;
    }
    
    .filter-dropdown select:hover {
      border-color: #39B54A;
      box-shadow: 0 4px 12px rgba(57,181,74,0.15);
    }
    
    .filter-dropdown select:focus {
      border-color: #39B54A;
      box-shadow: 0 0 0 3px rgba(57,181,74,0.1);
    }
    
    .filter-dropdown::after {
      content: '▼';
      position: absolute;
      right: 12px;
      top: 50%;
      transform: translateY(-50%);
      color: #666;
      font-size: 0.8rem;
      pointer-events: none;
      transition: color 0.2s;
    }
    
    .filter-dropdown:hover::after {
      color: #39B54A;
    }
    
    .filter-label {
      font-size: 0.8rem;
      font-weight: 600;
      color: #666;
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    
    [data-theme="dark"] .filter-dropdown select {
      background: #23272b;
      border-color: #3d444e;
      color: #eee;
    }
    
    [data-theme="dark"] .filter-dropdown select:hover {
      border-color: #39B54A;
    }
    
    [data-theme="dark"] .filter-dropdown select:focus {
      border-color: #39B54A;
    }
    
    [data-theme="dark"] .filter-label {
      color: #aaa;
    }
    
    @media (max-width: 768px) {
      .advanced-filters {
        flex-direction: column;
        gap: 12px;
      }
      
      .filter-dropdown {
        min-width: 200px;
      }
    }
    .portfolio-cards {
      display: flex;
      flex-wrap: wrap;
      gap: 48px 40px;
      justify-content: center;
      margin-bottom: 60px;
      align-items: stretch;
    }
    .projectTile {
      background: white;
      border-radius: 16px;
      width: 300px;
      flex: 0 0 300px;
      display: flex;
      flex-direction: column;
      margin-bottom: 24px;
      margin-top: 8px;
      transition: transform 0.2s, box-shadow 0.2s;
      box-shadow: 0 16px 48px rgba(0,0,0,0.22), 0 4px 16px rgba(0,0,0,0.12);
    }
    .projectTile:hover {
      transform: translateY(-10px) scale(1.035);
      box-shadow: 0 16px 48px rgba(0,0,0,0.22), 0 4px 16px rgba(0,0,0,0.12);
    }
    .projectTile img {
      border-radius: 10px 10px 0 0;
      width: 100%;
      height: 180px;
      object-fit: cover;
      display: block;
    }
    .projectInfo {
      padding: 18px 16px 16px 16px;
      flex: 1 1 auto;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    .projectInfo h3 {
      font-size: 1.25rem;
      margin: 0 0 8px 0;
      color: #39B54A;
      text-align: center;
    }
    .projectInfo p {
      font-size: 1rem;
      color: #333;
      margin: 0 0 16px 0;
      flex: 1 1 auto;
    }
    .projectInfo button {
      background: none;
      color: #39B54A;
      border: 2px solid #39B54A;
      border-radius: 0;
      padding: 12px 28px;
      font-size: 1rem;
      font-family: inherit;
      font-weight: 700;
      cursor: pointer;
      margin: 0 auto;
      box-shadow: 0 4px 18px rgba(0,0,0,0.18), 0 1.5px 6px rgba(0,0,0,0.10);
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
    }
    .projectInfo button:hover {
      background: #39B54A;
      color: #fff;
      box-shadow: 0 8px 32px rgba(0,0,0,0.28), 0 2px 8px rgba(0,0,0,0.18);
    }
    .projectInfo a {
      color: inherit;
      text-decoration: none;
    }
    /* Responsive portfolio layout */
    @media (min-width: 1400px) {
      .portfolio-cards {
        justify-content: center;
        gap: 48px 40px;
      }
      .projectTile {
        width: 320px;
        flex: 0 0 320px;
      }
    }
    
    @media (max-width: 1399px) and (min-width: 1100px) {
      .portfolio-cards {
        justify-content: center;
        gap: 44px 36px;
      }
      .projectTile {
        width: 300px;
        flex: 0 0 300px;
      }
    }
    
    @media (max-width: 1099px) and (min-width: 800px) {
      .portfolio-cards {
        justify-content: center;
        gap: 36px 28px;
      }
      .projectTile {
        width: 280px;
        flex: 0 0 280px;
      }
    }
    
    @media (max-width: 799px) and (min-width: 600px) {
      .portfolio-cards {
        justify-content: center;
        gap: 28px 18px;
      }
      .projectTile {
        width: 260px;
        flex: 0 0 260px;
      }
    }
    
    @media (max-width: 599px) {
      .portfolio-cards {
        display: flex !important;
        flex-direction: row !important;
        overflow-x: auto !important;
        flex-wrap: nowrap !important;
        gap: 24px 0 !important;
        justify-content: flex-start !important;
        padding: 0 8px 0 8px !important;
        padding-right: 40vw !important; /* allow last card to not be flush */
        scroll-snap-type: x mandatory !important;
        -webkit-overflow-scrolling: touch !important;
        scrollbar-width: thin !important;
      }
      /* Remove display: none for ::-webkit-scrollbar so native scrollbar is visible */
      .projectTile {
        width: 80vw !important;
        max-width: 320px !important;
        flex: 0 0 80vw !important;
        margin: 0 8px 0 0 !important;
        border-radius: 18px !important;
        scroll-snap-align: start !important;
      }
      .portfolio-scrollbar {
        width: 90vw !important;
        max-width: 320px !important;
        margin: 0 auto 12px auto !important;
        display: block !important;
        height: 6px !important;
        background: #b0b0b0 !important;
        border-radius: 4px !important;
        appearance: none;
        -webkit-appearance: none;
        outline: none;
        position: relative;
        left: 50%;
        transform: translateX(-50%);
      }
      .portfolio-scrollbar::-webkit-slider-thumb {
        appearance: none;
        -webkit-appearance: none;
        width: 60px;
        height: 12px;
        background: #39B54A;
        border-radius: 6px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.10);
        cursor: pointer;
        border: none;
        margin-top: -3px;
        transition: background 0.2s;
      }
      .portfolio-scrollbar::-moz-range-thumb {
        width: 60px;
        height: 12px;
        background: #39B54A;
        border-radius: 6px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.10);
        cursor: pointer;
        border: none;
        transition: background 0.2s;
      }
      .portfolio-scrollbar::-ms-thumb {
        width: 60px;
        height: 12px;
        background: #39B54A;
        border-radius: 6px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.10);
        cursor: pointer;
        border: none;
        transition: background 0.2s;
      }
      .portfolio-scrollbar:focus {
        outline: none;
        box-shadow: 0 0 0 2px #39B54A44;
      }
      .portfolio-scrollbar::-webkit-slider-runnable-track {
        height: 6px;
        background: #b0b0b0;
        border-radius: 4px;
      }
      .portfolio-scrollbar::-ms-fill-lower {
        background: #b0b0b0;
        border-radius: 4px;
      }
      .portfolio-scrollbar::-ms-fill-upper {
        background: #b0b0b0;
        border-radius: 4px;
      }
      .portfolio-scrollbar::-moz-range-track {
        height: 6px;
        background: #b0b0b0;
        border-radius: 4px;
      }
      .projectInfo h3 {
        font-size: 1.1rem !important;
        margin-bottom: 6px !important;
      }

      .projectInfo {
        padding: 14px 10px 14px 10px !important;
      }
      /* ...existing mobile slider styles... */
      .portfolio-slider-wrapper {
        border-radius: 12px !important;
        padding-top: 8px !important;
        padding-bottom: 8px !important;
        margin-bottom: 24px !important;
      }
    }
    /* --- End Portfolio Card Styles --- */

    [data-theme="light"] .pricing-package h3 {
      background: #23272b;
      color: #FFCB05;
      padding: 12px 0 8px 0;
      border-radius: 12px 12px 0 0;
      margin: 0;
      width: 100%;
      box-sizing: border-box;
    }
    [data-theme="light"] .pricing-package .price {
      color: black;
      padding: 12px 0 8px 0;
      border-radius: 0;
      margin: 0;
      width: 100%;
      box-sizing: border-box;
    }
    .pricing-package-content {
      padding: 0 24px;
    }
    [data-theme="light"] .tab-bar::before, [data-theme="light"] .tab-bar::after {
      background: #bbb;
    }

    .portfolio-cards {
      scrollbar-width: none !important; /* Firefox */
      -ms-overflow-style: none !important; /* IE/Edge */
    }
    .portfolio-cards::-webkit-scrollbar {
      display: none !important; /* Chrome/Safari */
    }

    [data-theme="dark"] .pricing-package h3 {
      color: #FFCB05;
    }

    /* Add yellow checkmarks to Enterprise package bullet points */
    .pricing-package h3 {
      /* No change, just for context */
    }
    .pricing-package .price {
      /* No change, just for context */
    }
    .pricing-package:has(h3:contains('Enterprise')) ul li {
      list-style: none;
      position: relative;
      padding-left: 1.6em;
    }
    .pricing-package:has(h3:contains('Enterprise')) ul li::before {
      content: '\2713'; /* Unicode checkmark */
      color: #FFCB05;
      position: absolute;
      left: 0;
      font-size: 1.1em;
      line-height: 1;
      top: 0.7em;
    }
    .enterprise-package ul li {
      list-style: none;
      position: relative;
      padding-left: 1.6em;
    }
    .enterprise-package ul li::before {
      content: '\2713';
      color: #FFCB05;
      position: absolute;
      left: 0;
      font-size: 1.1em;
      line-height: 1;
      top: 0.7em;
    }

    @media (max-width: 599px) {
      .projectTile:hover {
        transform: none !important;
        box-shadow: 0 8px 32px rgba(0,0,0,0.18), 0 2px 8px rgba(0,0,0,0.10) !important;
      }
    }

    .projectMeta {
      display: flex;
      gap: 12px;
      margin-bottom: 16px;
      font-size: 0.75rem;
      color: #888;
      justify-content: center;
      flex-wrap: nowrap;
      overflow: hidden;
    }
    
    .projectPlatform,
    .projectDate,
    .projectType {
      background: #f5f5f5;
      padding: 3px 6px;
      border-radius: 4px;
      font-weight: 500;
      white-space: nowrap;
      flex-shrink: 0;
    }
    
    [data-theme="dark"] .projectPlatform,
    [data-theme="dark"] .projectDate,
    [data-theme="dark"] .projectType {
      background: #2a2a2a;
      color: #ccc;
    }

    /* Hide category buttons and show dropdown on mobile */
    @media (max-width: 599px) {
      .portfolio-filters {
        display: none !important;
      }
      .portfolio-category-mobile-dropdown {
        display: flex !important;
        flex-direction: column;
        align-items: center;
        margin: 0 auto 12px auto;
        max-width: 320px;
        width: 100%;
      }
    }
    @media (min-width: 600px) {
      .portfolio-category-mobile-dropdown {
        display: none !important;
      }
    }

    /* Style for mobile category dropdown */
    .portfolio-category-mobile-dropdown {
      display: none;
    }
    .portfolio-category-mobile-dropdown .filter-label {
      font-size: 0.8rem;
      font-weight: 600;
      color: #666;
      margin-bottom: 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      align-self: flex-start;
    }
    .portfolio-category-mobile-dropdown select {
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background: white;
      border: 2px solid #e0e0e0;
      border-radius: 8px;
      padding: 10px 16px;
      font-size: 0.9rem;
      font-family: inherit;
      font-weight: 500;
      color: #333;
      cursor: pointer;
      transition: all 0.2s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.08);
      width: 100%;
      outline: none;
    }
    .portfolio-category-mobile-dropdown select:hover {
      border-color: #39B54A;
      box-shadow: 0 4px 12px rgba(57,181,74,0.15);
    }
    .portfolio-category-mobile-dropdown select:focus {
      border-color: #39B54A;
      box-shadow: 0 0 0 3px rgba(57,181,74,0.1);
    }
    [data-theme="dark"] .portfolio-category-mobile-dropdown select {
      background: #23272b;
      border-color: #3d444e;
      color: #eee;
    }
    [data-theme="dark"] .portfolio-category-mobile-dropdown select:hover {
      border-color: #39B54A;
    }
    [data-theme="dark"] .portfolio-category-mobile-dropdown select:focus {
      border-color: #39B54A;
    }

    /* 1. Add this to <style> for label color fix: */
    [data-theme="dark"] .portfolio-category-mobile-dropdown .filter-label {
      color: #aaa;
    }
  </style>
</head>
<body>

  <div style="width:100%; display:flex; justify-content:space-between; align-items:center; margin-bottom:12px; position:relative; z-index:10;">
    <a href="#" onclick="loadDefaultContent(); return false;" class="header-logo" style="text-decoration:none; display:flex; align-items:center; transition:opacity 0.2s;">
      <img src="IMG/nd-logo-v2c.png" alt="Nuanced Design Logo" style="width:60px; border-radius:50%;">
    </a>
    <button id="modeSwitch" style="padding:8px 18px; border-radius:20px; border:none; background:#eee; color:#222; font-weight:600; font-size:1em; cursor:pointer; box-shadow:0 2px 8px rgba(0,0,0,0.10); transition:background 0.2s, color 0.2s;">🌙 Dark Mode</button>
  </div>

  <div class="content" id="mainContent">
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque mollis quam sed sapien blandit, eu porttitor lectus sagittis. Sed ac eros id magna fermentum volutpat. Suspendisse potenti.</p>
    <p>Fusce vulputate nisi ut dolor posuere, vel sollicitudin elit fermentum. Praesent luctus orci a lorem volutpat, nec ultrices sapien tincidunt. Etiam eget ipsum at ex pulvinar lacinia.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque mollis quam sed sapien blandit, eu porttitor lectus sagittis. Sed ac eros id magna fermentum volutpat. Suspendisse potenti.</p>
    <p>Fusce vulputate nisi ut dolor posuere, vel sollicitudin elit fermentum. Praesent luctus orci a lorem volutpat, nec ultrices sapien tincidunt. Etiam eget ipsum at ex pulvinar lacinia.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque mollis quam sed sapien blandit, eu porttitor lectus sagittis. Sed ac eros id magna fermentum volutpat. Suspendisse potenti.</p>
  </div>

  <div class="booking-page" id="bookingPage">
  <button class="close-btn" onclick="closeBooking()">← 🤷 Nevermind</button>

    <!-- Background floating balloons -->
    <div class="bg-balloon color-1"></div>
    <div class="bg-balloon color-2"></div>
    <div class="bg-balloon color-3"></div>
    <div class="bg-balloon color-4"></div>
    <div class="bg-balloon color-5"></div>
    <div class="bg-balloon color-1"></div>
    <div class="bg-balloon color-2"></div>
    <div class="bg-balloon color-3"></div>

    <div class="bookingContent">
      <h2>Let's Get Started</h2>
      <p style="margin-bottom:24px;">Would you like to tell us about your project or just get in touch?</p>
      <a href="#" onclick="openIntakeModal(); return false;" class="phone-number">🧭 Start Project Intake</a><br/>
      <p style="margin:8px 0 16px 0; font-size:0.9em; color:#666;">The survey is only four questions and will just take a minute.</p>
      <div style="margin-top:10px;">
        <div style="margin-bottom:8px; font-weight:500;">Or just call or email:</div>
        <div>
          <a href="tel:6074445455" style="color:#39B54A;text-decoration:underline;">(607) 444-5455</a>
          <span style="color:#39B54A;">&nbsp;|&nbsp;</span>
          <a href="mailto:hello@nuanceddesign.com" style="color:#39B54A;text-decoration:underline;">hello@nuanceddesign.com</a>
        </div>
      </div>
    </div>
  </div>

  <div class="booking-overlay" id="bookingOverlay" onclick="closeBooking()"></div>

  <!-- Intake Form Modal -->
  <div class="intake-modal" id="intakeModal">
    <div class="intake-modal-content">
      <button class="intake-close-btn" onclick="closeIntakeModal()">✕</button>
      <iframe src="gamified-intake-form.html" frameborder="0" width="100%" height="100%"></iframe>
    </div>
  </div>

  <div class="tab-bar-wrapper" id="tabBarWrapper">
    <div class="tab-bar" id="tabBar">
      <img src="IMG/Icons/balloon-book-a-call3.png" alt="Book a Call" class="balloon" onclick="toggleBooking()" />

      <div class="tab-item process" onclick="activateTab(this); setColor('#00AEEF'); closeBooking(); openProcess();">
        <img src="IMG/Icons/process-icon.png" alt="Process">
        Process
      </div>

      <div class="tab-item about" onclick="activateTab(this); setColor('#EC008C'); closeBooking(); openAbout();">
        <img src="IMG/Icons/about-icon.png" alt="About">
        About
      </div>

      <div class="tab-item portfolio" onclick="activateTab(this); setColor('#39B54A'); closeBooking(); loadPortfolioSection();">
        <img src="IMG/Icons/portfolio-icon.png" alt="Portfolio">
        Portfolio
      </div>

      <div class="tab-item pricing" onclick="activateTab(this); setColor('#FFCB05'); closeBooking(); openPricing();">
        <img src="IMG/Icons/pricing-icon.png" alt="Pricing">
        Pricing
      </div>
    </div>
  </div>

  <script>
  let lastScroll = 0;
  const bar = document.getElementById('tabBar');
  const barWrapper = document.getElementById('tabBarWrapper');
  const bookingPage = document.getElementById('bookingPage');
  const bookingOverlay = document.getElementById('bookingOverlay');

  window.addEventListener('scroll', () => {
    const currentScroll = window.pageYOffset;
    const documentHeight = document.documentElement.scrollHeight;
    const windowHeight = window.innerHeight;
    const maxScroll = documentHeight - windowHeight;

    // ✅ If booking page is open, never hide the tab bar
    if (bookingPage.classList.contains('open')) {
      bar.classList.remove('hidden');
      return;
    }

    // Prevent showing tab bar when at the very bottom (within 10px)
    if (currentScroll >= maxScroll - 10) {
      bar.classList.add('hidden');
      return;
    }

    if (currentScroll <= 0) {
      bar.classList.remove('hidden');
      return;
    }
    if (currentScroll > lastScroll) {
      bar.classList.add('hidden');
    } else {
      bar.classList.remove('hidden');
    }
    lastScroll = currentScroll;
  });

    function setColor(color) {
      document.body.style.color = color;
      // Use darker, more muted colors for the booking page background
      const mutedColors = {
        '#00AEEF': '#1a4a5a', // Darker cyan
        '#EC008C': '#4a1a3a', // Darker magenta  
        '#39B54A': '#1a4a1a', // Darker green
        '#FFCB05': '#4a3a1a'  // Darker yellow
      };
      bookingPage.style.background = mutedColors[color] || color;
      bookingPage.style.color = '#fff'; // Keep text white for better contrast
    }

  function toggleBooking() {
    const isOpen = bookingPage.classList.contains('open');
    if (isOpen) {
      closeBooking();
    } else {
      openBooking();
    }
  }

  function openBooking() {
    bookingPage.classList.add('open');
    bookingOverlay.style.display = 'block';
    barWrapper.classList.add('active');
    bar.classList.remove('hidden'); // ✅ Keep bar visible when booking is open
  }

  function closeBooking() {
    bookingPage.classList.remove('open');
    bookingOverlay.style.display = 'none';
    barWrapper.classList.remove('active');
  }

  // Hide overlay by default
  bookingOverlay.style.display = 'none';
  
  // Assign random colors to balloons on page load
  function assignRandomColors() {
    const balloons = document.querySelectorAll('.bg-balloon');
    const colors = ['color-1', 'color-2', 'color-3', 'color-4', 'color-5', 'color-6', 'color-7', 'color-8'];
    
    balloons.forEach(balloon => {
      const randomColor = colors[Math.floor(Math.random() * colors.length)];
      balloon.className = `bg-balloon ${randomColor}`;
    });
  }
  
  // Assign colors when page loads
  assignRandomColors();

  function activateTab(el) {
    document.querySelectorAll('.tab-item').forEach(item => item.classList.remove('active'));
    el.classList.add('active');
  }

  function openProcess() {
      // Load markdown content
      fetch('process.md')
        .then(response => response.text())
        .then(markdown => {
          // Remove Jekyll front matter (lines between ---)
          const content = markdown.replace(/^---[\s\S]*?---\s*/, '');
          
          // Convert markdown to HTML
          const html = marked.parse(content);
          
          // Update the main content area
          const mainContent = document.getElementById('mainContent');
          mainContent.innerHTML = `
            <div class="markdown-content">
              <a href="#" class="back-link" style="font-size:1.1em;" onclick="loadDefaultContent(); return false;"><span style="font-size:1.2em;vertical-align:middle;">← 🏠</span> Back to Home</a>
              ${html}
            </div>
          `;
          
          // Scroll to top
          window.scrollTo(0, 0);
          // Accordion JS
          setTimeout(() => {
            document.querySelectorAll('.accordion-header').forEach(header => {
              header.onclick = function() {
                const content = this.nextElementSibling;
                this.classList.toggle('active');
                content.classList.toggle('open');
                // Toggle plus/minus icon
                const icon = this.querySelector('.accordion-icon');
                if (this.classList.contains('active')) {
                  icon.textContent = '−';
                } else {
                  icon.textContent = '+';
                }
              };
            });
          }, 0);
        })
        .catch(error => {
          console.error('Error loading process content:', error);
          alert('Error loading process content. Please try again.');
        });
    }

    function openAbout() {
      // Load markdown content
      fetch('about.md')
        .then(response => response.text())
        .then(markdown => {
          // Remove Jekyll front matter (lines between ---)
          const content = markdown.replace(/^---[\s\S]*?---\s*/, '');
          
          // Convert markdown to HTML
          const html = marked.parse(content);
          
          // Update the main content area
          const mainContent = document.getElementById('mainContent');
          mainContent.innerHTML = `
            <div class="markdown-content about-page">
              <a href="#" class="back-link" style="font-size:1.1em;" onclick="loadDefaultContent(); return false;"><span style="font-size:1.2em;vertical-align:middle;">← 🏠</span> Back to Home</a>
              ${html}
            </div>
          `;
          
          // Scroll to top
          window.scrollTo(0, 0);
        })
        .catch(error => {
          console.error('Error loading about content:', error);
          alert('Error loading about content. Please try again.');
        });
    }

    function openPricing() {
      // Create pricing content with HTML structure
      const pricingContent = `
        <h1>Pricing & Packages</h1>
        
        <h2>Our Pricing Philosophy</h2>
        <p>We believe in transparent, value-based pricing that gives you exactly what you need without unnecessary extras. Every project is unique, so we offer flexible packages that can be customized to fit your specific requirements and budget.</p>
        
        <h2>Website Design Packages</h2>
        
        <div class="pricing-packages">
        
        <div class="pricing-package">
        <h3>Starter Package</h3>
        <div class="price">Starting at $2,500</div>
        <div class="pricing-package-content">
        <div class="subtitle">Perfect for small businesses and startups</div>
        <ul>
        <li>Custom website design (up to 5 pages)</li>
        <li>Mobile-responsive design</li>
        <li>Basic SEO optimization</li>
        <li>Contact form integration</li>
        <li>2 rounds of revisions</li>
        <li>Launch support</li>
        </ul>
        </div>
        </div>
        
        <div class="pricing-package">
        <h3>Professional Package</h3>
        <div class="price">Starting at $4,500</div>
        <div class="pricing-package-content">
        <div class="subtitle">Ideal for growing businesses</div>
        <ul>
        <li>Custom website design (up to 10 pages)</li>
        <li>Mobile-responsive design</li>
        <li>Advanced SEO optimization</li>
        <li>Contact form and newsletter integration</li>
        <li>Blog setup</li>
        <li>Social media integration</li>
        <li>3 rounds of revisions</li>
        <li>Launch support and training</li>
        </ul>
        </div>
        </div>
        
        <div class="pricing-package">
        <h3>Enterprise Package</h3>
        <div class="price">Starting at $8,500</div>
        <div class="pricing-package-content">
        <div class="subtitle">For established businesses and organizations</div>
        <ul>
        <li>Custom website design (unlimited pages)</li>
        <li>Mobile-responsive design</li>
        <li>Comprehensive SEO strategy</li>
        <li>Advanced functionality (e-commerce, booking systems, etc.)</li>
        <li>Content management system</li>
        <li>Analytics and reporting setup</li>
        <li>Ongoing support and maintenance</li>
        <li>Unlimited revisions during development</li>
        </ul>
        </div>
        </div>
        
        </div>
        
        <h2>Additional Services</h2>
        
        <h3>Content Creation</h3>
        <ul>
        <li>Copywriting and editing</li>
        <li>Photography and image optimization</li>
        <li>Video production and editing</li>
        <li>Custom graphics and illustrations</li>
        </ul>
        
        <h3>Ongoing Support</h3>
        <ul>
        <li>Website maintenance and updates</li>
        <li>Content updates and management</li>
        <li>Performance monitoring and optimization</li>
        <li>Security updates and backups</li>
        </ul>
        
        <h3>Consultation Services</h3>
        <ul>
        <li>Digital strategy planning</li>
        <li>User experience audits</li>
        <li>Conversion optimization</li>
        <li>Brand development and positioning</li>
        </ul>
        
        <h2>Getting Started</h2>
        <p>Not sure which package is right for you? We offer a free consultation to discuss your project and recommend the best approach for your needs and budget.</p>
        <p><strong>Ready to get started?</strong> <a href="javascript:void(0);" onclick="openBookingModal(); return false;">Schedule a consultation</a> or <a href="javascript:void(0);" onclick="openIntakeModal(); return false;">fill out our project intake form</a> to tell us about your project.</p>
        
        <h2>Payment Terms</h2>
        <ul>
        <li>50% deposit required to begin work</li>
        <li>Remaining balance due upon project completion</li>
        <li>Payment plans available for larger projects</li>
        <li>All prices in USD</li>
        </ul>
        
        <h3>Accepted Payment Methods</h3>
        <ul>
        <li><strong>Digital Payments:</strong> Venmo, Cash App, Zelle</li>
        <li><strong>Traditional Payments:</strong> Cash or Check</li>
        <li><strong>Credit Card:</strong> Through Square (3.5% processing fee)</li>
        </ul>
        
        <p><em>Pricing is subject to change. Custom quotes available for projects with specific requirements.</em></p>
        <p style="text-align:center; margin-top:2em;"><a href="#" class="get-in-touch-link" onclick="toggleBooking(); return false;">Get in touch</a><span class="get-in-touch-rest"> to start the conversation.</span></p>
      `;
      
      // Update the main content area
      const mainContent = document.getElementById('mainContent');
      mainContent.innerHTML = `
        <div class="markdown-content pricing-page">
          <a href="#" class="back-link" style="font-size:1.1em;" onclick="loadDefaultContent(); return false;"><span style="font-size:1.2em;vertical-align:middle;">← 🏠</span> Back to Home</a>
          ${pricingContent}
        </div>
      `;
      
      // Scroll to top
      window.scrollTo(0, 0);
    }
    
    function loadDefaultContent() {
      const mainContent = document.getElementById('mainContent');
      mainContent.innerHTML = `
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque mollis quam sed sapien blandit, eu porttitor lectus sagittis. Sed ac eros id magna fermentum volutpat. Suspendisse potenti.</p>
        <p>Fusce vulputate nisi ut dolor posuere, vel sollicitudin elit fermentum. Praesent luctus orci a lorem volutpat, nec ultrices sapien tincidunt. Etiam eget ipsum at ex pulvinar lacinia.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque mollis quam sed sapien blandit, eu porttitor lectus sagittis. Sed ac eros id magna fermentum volutpat. Suspendisse potenti.</p>
        <p>Fusce vulputate nisi ut dolor posuere, vel sollicitudin elit fermentum. Praesent luctus orci a lorem volutpat, nec ultrices sapien tincidunt. Etiam eget ipsum at ex pulvinar lacinia.</p>
        <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque mollis quam sed sapien blandit, eu porttitor lectus sagittis. Sed ac eros id magna fermentum volutpat. Suspendisse potenti.</p>
      `;
      
      // Reset tab colors and icons to default grey state
      setColor('#222');
      document.querySelectorAll('.tab-item').forEach(item => item.classList.remove('active'));
    }
  // --- Portfolio Card System ---
  const portfolioProjects = [
    {
      title: "Last Seen in the Twilight Zone",
      image: "IMG/last-seen-thumbnail.png",
      description: "A podcast about missing people from the real-life 'Twilight Zone'—Binghamton, NY, hometown of Rod Serling.",
      link: "https://lastseenpodcast.com",
      category: "Creatives",
      platform: "Custom",
      date: "2025",
      projectType: "Portfolio & Creative"
    },
    {
      title: "Rancho Bombero",
      image: "IMG/rancho-bombero-thumbnail.png",
      description: "Rancho Bombero is an all-in-one body oil for men—crafted for skin, beard, and hair. Experience natural hydration, subtle scent, and rugged simplicity in one bottle.",
      link: "https://ranchobombero.com",
      category: "Products",
      platform: "Shopify",
      date: "2024",
      projectType: "E-commerce & Retail"
    },
    {
      title: "Hidden Hollows Sporting Clays",
      image: "IMG/hidden-hallows-thumbnail.png",
      description: "Ecommerce site for Hidden Hollows Sporting Clays, offering clay shooting experiences and online booking.",
      link: "https://hhhsc.net",
      category: "Services",
      platform: "WordPress",
      date: "2023",
      projectType: "E-commerce & Retail"
    },
    {
      title: "Hidden Lake Resort",
      image: "IMG/hidden-lake-resort-thumbnail.jpg",
      description: "Designed and custom built website, integrated with iGMS booking to be on all major rental platforms.",
      link: "https://hiddenlakeresortpa.com",
      category: "Services",
      platform: "WordPress",
      date: "2023",
      projectType: "E-commerce & Retail"
    },
    {
      title: "Christine DeGrazia, RN",
      image: "IMG/christine-degrazia-thumbnail.png",
      description: "After dealing with burnout from the COVID pandemic, Christine DeGrazia, RN is on a mission to help other nurses and healthcare professionals find the tools for self-compassion and self-care.",
      link: "https://christinedegrazia.com/self-compassion-fatigue-book/",
      category: "Creatives",
      platform: "WordPress",
      date: "2023",
      projectType: "Educational Content"
    },
    {
      title: "Tri-Cities Opera",
      image: "IMG/tricities-syracuse-opera.png",
      description: "Website for Tri-Cities Opera, a non-profit opera company. Also worked with Syracuse Opera.",
      link: "https://www.tricitiesopera.com/",
      category: "Non-Profit",
      platform: "WordPress",
      date: "2023",
      projectType: "Non-profit & Community"
    },
    {
      title: "Robin Applewood",
      image: "IMG/robinapplewood.jpg",
      description: "Official website for Robin Applewood, musician and producer.",
      link: "https://robinapplewood.com",
      category: "Creatives",
      platform: "Bandzoogle",
      date: "2023",
      projectType: "Portfolio & Creative"
    },
    {
      title: "Blacktie Brothers",
      image: "IMG/blacktie-brothers-thumbnail.jpg",
      description: "Wedding photography business launched in October, 2022.",
      link: "https://blacktiebrothers.com",
      category: "Services",
      platform: "Squarespace",
      date: "2022",
      projectType: "Portfolio & Creative"
    },
    {
      title: "Theo's Savory Sauces",
      image: "IMG/theos-savory-sauces-bbq-artisan-sauces-thumbnail.jpg",
      description: "Full site design and build from scratch. Launched in November, 2022.",
      link: "https://theossavorysauces.com",
      category: "Products",
      platform: "Custom",
      date: "2022",
      projectType: "E-commerce & Retail"
    },
    {
      title: "Slaughterland",
      image: "IMG/slaughterland-thumbnail.jpg",
      description: "Optimized the website increasing speed 4x and designed many new assets for the redesign.",
      link: "https://slaughterland.com/",
      category: "Services",
      platform: "WordPress",
      date: "2022",
      projectType: "E-commerce & Retail"
    },
    {
      title: "Blackfern Media",
      image: "IMG/blackfern-media-thumbnail.jpg",
      description: "Nuanced Design is partnered with Blackfern Media. Designed and built the site, launched May, 2022.",
      link: "https://blackfernmedia.com",
      category: "Enterprise",
      platform: "WordPress",
      date: "2022",
      projectType: "Business Website"
    },
    {
      title: "Eva Orbuch",
      image: "IMG/eva-orbuch-thumbnail.png",
      description: "Website for Eva Orbuch, coach, facilitator, and author.",
      link: "https://evaorbuch.com",
      category: "Individual",
      platform: "Wix",
      date: "2021",
      projectType: "Non-profit & Community"
    },
    {
      title: "Trendgraphix",
      image: "IMG/trendgraphix-thumbnail.jpg",
      description: "Worked with a marketing professional to do a full redesign of Trendgraphix marketing website and custom-coded it.",
      link: "https://trendgraphix.com",
      category: "Enterprise",
      platform: "Custom",
      date: "2021",
      projectType: "Business Website"
    },
    {
      title: "Jordan Kersten Studio",
      image: "IMG/jordan-kersten-thumbnail.png",
      description: "Health, wellness, yoga, and voice lessons by Jordan Kersten.",
      link: "https://jordankersten.com",
      category: "Individual",
      platform: "Squarespace",
      date: "2021",
      projectType: "Facelift"
    },
    {
      title: "Gather Facilitation",
      image: "IMG/gather-facilitation-thumbnail.jpg",
      description: "Designed and custom coded from scratch. Launched in March, 2020.",
      link: "https://gatherfacilitation.com",
      category: "Individual",
      platform: "Custom",
      date: "2020",
      projectType: "Non-profit & Community"
    },
    {
      title: "Lilypad",
      image: "IMG/lilypad-thumbnail.jpg",
      description: "Created a 3D scan, produced videos, created infographics, and a website to explain why people should build high-performance homes.",
      link: "https://lilypad.house",
      category: "Non-Profit",
      platform: "Custom",
      date: "2020",
      projectType: "Educational Content"
    },
    {
      title: "Origin Materials",
      image: "IMG/origin-materials-thumbnail.png",
      description: "Corporate website for Origin Materials, a leader in sustainable materials innovation.",
      link: "https://originmaterials.com",
      category: "Enterprise",
      platform: "CraftCMS",
      date: "2020",
      projectType: "Business Website"
    },
    {
      title: "Siempo",
      image: "IMG/Siempo/Mindful-Morning-mock.png",
      description: "Website for Siempo, a non-profit focused on digital wellness and mindful technology.",
      link: "https://www.siempo.com/",
      category: "Non-Profit",
      date: "2019",
      projectType: "Mobile App"
    },
    {
      title: "OneOf",
      image: "IMG/OneOf/OneOf-packaging.jpg",
      description: "Bespoke handmade leather watch bands crafted from the finest leather and techniques in San Francisco.",
      link: "http://www.oneof.craftedium.xyz/",
      category: "Products",
      platform: "Custom",
      date: "2018",
      projectType: "Fabrication & Signage"
    },
    {
      title: "AWA Fit",
      image: "IMG/awa-fit-mock2.jpg",
      description: "Fitness and wellness platform for AWA Fit.",
      link: "https://awa-fit.com",
      category: "Products",
      date: "2018",
      projectType: "Mobile App"
    },
    {
      title: "Slingshot Foods",
      image: "IMG/Slingshot/sling-booth.jpg",
      description: "Food and beverage company website for Slingshot Foods.",
      link: "https://slingshotfoods.com",
      category: "Products",
      date: "2017",
      projectType: "Fabrication & Signage"
    },
    {
      title: "Calm",
      image: "IMG/calm-thumbnail.jpg",
      description: "Fabrication and signage work for Calm.",
      link: "https://calm.com",
      category: "Products",
      date: "2017",
      projectType: "Fabrication & Signage"
    },
    {
      title: "EntheoZen",
      image: "IMG/entheozen-thumbnail.jpg",
      description: "Website facelift for EntheoZen.",
      link: "https://entheozen.com",
      category: "Products",
      platform: "WordPress",
      date: "2016",
      projectType: "Facelift"
    },
    {
      title: "Safe Harbor",
      image: "IMG/Safe-Harbor/safe-harbor-mock2.jpg",
      description: "Website for Safe Harbor, a non-profit organization providing support and resources to those in need.",
      link: "https://safeharbor.org/",
      category: "Non-Profit",
      platform: "Hackathon",
      date: "2015",
      projectType: "Mobile App"
    }
  ];

  const portfolioCategories = [
    "All",
    "Enterprise",
    "Non-Profit",
    "Individual",
    "Creatives",
    "Products",
    "Services"
  ];

  function renderPortfolioCards(category = "All", yearFilter = "All", typeFilter = "All", platformFilter = "All") {
    let filtered = portfolioProjects;
    
    // Apply category filter
    if (category !== "All") {
      filtered = filtered.filter(p => p.category === category);
    }
    
    // Apply year filter
    if (yearFilter !== "All") {
      filtered = filtered.filter(p => p.date === yearFilter);
    }
    
    // Apply project type filter
    if (typeFilter !== "All") {
      filtered = filtered.filter(p => p.projectType === typeFilter);
    }
    
    // Apply platform filter
    if (platformFilter !== "All") {
      filtered = filtered.filter(p => p.platform === platformFilter);
    }
    
    if (filtered.length === 0) {
      return `<div style='text-align:center; margin:40px 0; padding: 40px; background: #f8f9fa; border-radius: 12px;'>
        <h3 style='color: #666; margin-bottom: 16px;'>🤷‍♂️ Well, this is awkward...</h3>
        <p style='color: #888; font-size: 1.1em;'>No projects match your super specific filter combo. Maybe try being less picky? 😉</p>
      </div>`;
    }
    // Mobile slider logic
    const isMobile = window.innerWidth <= 599;
    if (isMobile) {
      setTimeout(() => {
        const slider = document.querySelector('.portfolio-cards');
        const scrollbar = document.querySelector('.portfolio-scrollbar');
        if (!slider || !scrollbar) return;
        // Sync scrollbar with slider
        function updateScrollbar() {
          const maxScroll = slider.scrollWidth - slider.clientWidth;
          const percent = maxScroll > 0 ? slider.scrollLeft / maxScroll : 0;
          scrollbar.value = percent * 100;
        }
        function updateSlider() {
          const maxScroll = slider.scrollWidth - slider.clientWidth;
          slider.scrollLeft = (scrollbar.value / 100) * maxScroll;
        }
        slider.onscroll = updateScrollbar;
        scrollbar.oninput = updateSlider;
        // Set initial position
        updateScrollbar();
      }, 0);
      // Show custom scrollbar above cards
      return `
        <div class='portfolio-slider-wrapper'>
          <input type='range' min='0' max='100' value='0' class='portfolio-scrollbar' aria-label='Scroll portfolio' />
          <div class='portfolio-cards'>
            ${filtered.map(project => `
              <div class='projectTile'>
                <img src='${project.image}' alt='${project.title}'>
                <div class='projectInfo'>
                  <h3>${project.title}</h3>
                  <p>${project.description}</p>
                  <div class='projectMeta'>
                    ${project.platform ? `<span class='projectPlatform'>${project.platform}</span>` : ''}
                    <span class='projectDate'>${project.date}</span>
                    <span class='projectType'>${project.projectType}</span>
                  </div>
                  <button><a href='${project.link}' target='_blank' rel='noopener'>Visit Site</a></button>
                </div>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }
    // Desktop/tablet: grid/flex as before
    return `<div class='portfolio-cards'>` +
      filtered.map(project => `
        <div class='projectTile'>
          <img src='${project.image}' alt='${project.title}'>
          <div class='projectInfo'>
            <h3>${project.title}</h3>
            <p>${project.description}</p>
            <div class='projectMeta'>
              ${project.platform ? `<span class='projectPlatform'>${project.platform}</span>` : ''}
              <span class='projectDate'>${project.date}</span>
              <span class='projectType'>${project.projectType}</span>
            </div>
            <button><a href='${project.link}' target='_blank' rel='noopener'>Visit Site</a></button>
          </div>
        </div>
      `).join('') +
      `</div>`;
  }

  function renderPortfolioFilters(activeCategory = "All") {
    // Count projects in each category
    const categoryCounts = {};
    portfolioCategories.forEach(cat => {
      if (cat === "All") {
        categoryCounts[cat] = portfolioProjects.length;
      } else {
        categoryCounts[cat] = portfolioProjects.filter(p => p.category === cat).length;
      }
    });
    // Get unique years, project types, and platforms
    const years = [...new Set(portfolioProjects.map(p => p.date))].sort((a, b) => b - a);
    const projectTypes = [...new Set(portfolioProjects.map(p => p.projectType))].sort();
    const platforms = [...new Set(portfolioProjects.map(p => p.platform).filter(p => p))].sort();
    // Mobile dropdown for categories with label
    const mobileDropdown = `<div class='portfolio-category-mobile-dropdown'><div class='filter-dropdown'><div class='filter-label'>Category</div><select id='categoryMobileFilter'>${portfolioCategories.map(cat => `<option value='${cat}'${cat === activeCategory ? " selected" : ""}>${cat} (${categoryCounts[cat]})</option>`).join('')}</select></div></div>`;
    // Desktop button row
    const desktopButtons = `<div class='portfolio-filters'>` +
      portfolioCategories.map(cat => `
          <button class='portfolio-filter-btn${cat === activeCategory ? " active" : ""}' data-category='${cat}'>${cat} (${categoryCounts[cat]})</button>
        `).join('') +
        `</div>`;
    // Advanced filters
    const advanced = `<div class='advanced-filters'>
      <div class='filter-dropdown'>
        <div class='filter-label'>Year</div>
        <select id='yearFilter'>
          <option value='All'>All Years</option>
          ${years.map(year => `<option value='${year}'>${year}</option>`).join('')}
        </select>
      </div>
      <div class='filter-dropdown'>
        <div class='filter-label'>Project Type</div>
        <select id='typeFilter'>
          <option value='All'>All Types</option>
          ${projectTypes.map(type => `<option value='${type}'>${type}</option>`).join('')}
        </select>
      </div>
      <div class='filter-dropdown'>
        <div class='filter-label'>Platform</div>
        <select id='platformFilter'>
          <option value='All'>All Platforms</option>
          ${platforms.map(platform => `<option value='${platform}'>${platform}</option>`).join('')}
        </select>
      </div>
    </div>`;
    // Combine for output
    return mobileDropdown + desktopButtons + advanced;
  }

  let currentPortfolioCategory = "All";
  let currentYearFilter = "All";
  let currentTypeFilter = "All";
  let currentPlatformFilter = "All";

  function loadPortfolioSection(category = "All", yearFilter = "All", typeFilter = "All", platformFilter = "All") {
    currentPortfolioCategory = category;
    currentYearFilter = yearFilter;
    currentTypeFilter = typeFilter;
    currentPlatformFilter = platformFilter;
    
    const mainContent = document.getElementById('mainContent');
    mainContent.innerHTML =
      `<div class="markdown-content portfolio-page">
        <a href="#" class="back-link" style="font-size:1.1em;" onclick="loadDefaultContent(); return false;"><span style="font-size:1.2em;vertical-align:middle;">← 🏠</span> Back to Home</a>
        <h1>Portfolio</h1>
        ${renderPortfolioFilters(category)}
        ${renderPortfolioCards(category, yearFilter, typeFilter, platformFilter)}
      </div>`;
    
    // Add event listeners for filter buttons
    document.querySelectorAll('.portfolio-filter-btn').forEach(btn => {
      btn.onclick = function() {
        loadPortfolioSection(this.getAttribute('data-category'), currentYearFilter, currentTypeFilter, currentPlatformFilter);
      };
    });
    
    // Add event listeners for dropdown filters
    setTimeout(() => {
      const yearSelect = document.getElementById('yearFilter');
      const typeSelect = document.getElementById('typeFilter');
      const platformSelect = document.getElementById('platformFilter');
      const catSelect = document.getElementById('categoryMobileFilter');
      
      if (yearSelect) {
        yearSelect.value = yearFilter;
        yearSelect.onchange = function() {
          loadPortfolioSection(currentPortfolioCategory, this.value, currentTypeFilter, currentPlatformFilter);
        };
      }
      
      if (typeSelect) {
        typeSelect.value = typeFilter;
        typeSelect.onchange = function() {
          loadPortfolioSection(currentPortfolioCategory, currentYearFilter, this.value, currentPlatformFilter);
        };
      }
      
      if (platformSelect) {
        platformSelect.value = platformFilter;
        platformSelect.onchange = function() {
          loadPortfolioSection(currentPortfolioCategory, currentYearFilter, currentTypeFilter, this.value);
        };
      }
      
      if (catSelect) {
        catSelect.value = category;
        catSelect.onchange = function() {
          loadPortfolioSection(this.value, currentYearFilter, currentTypeFilter, currentPlatformFilter);
        };
      }
    }, 0);
  }

  // Listen for resize and re-render if crossing the mobile/desktop threshold
  let lastIsMobile = window.innerWidth <= 599;
  window.addEventListener('resize', () => {
    const isMobile = window.innerWidth <= 599;
    if (isMobile !== lastIsMobile) {
      loadPortfolioSection(currentPortfolioCategory, currentYearFilter, currentTypeFilter, currentPlatformFilter);
      lastIsMobile = isMobile;
    }
  });
  // --- End Portfolio Card System ---

  // Light/Dark mode switch
  const modeSwitch = document.getElementById('modeSwitch');
  function setMode(mode) {
    if(mode === 'dark') {
      document.documentElement.setAttribute('data-theme', 'dark');
      modeSwitch.textContent = '🌙 Dark Mode';
      modeSwitch.style.background = '#23272b';
      modeSwitch.style.color = '#fff';
    } else {
      document.documentElement.setAttribute('data-theme', 'light');
      modeSwitch.textContent = '☀️ Light Mode';
      modeSwitch.style.background = '#eee';
      modeSwitch.style.color = '#222';
    }
  }
  // Detect system preference
  const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
  setMode(prefersDark ? 'dark' : 'light');
  modeSwitch.onclick = function() {
    const current = document.documentElement.getAttribute('data-theme');
    setMode(current === 'dark' ? 'light' : 'dark');
  };

  // Intake Modal Functions
  function openIntakeModal() {
    const modal = document.getElementById('intakeModal');
    modal.classList.add('active');
    document.body.style.overflow = 'hidden';
  }

  function closeIntakeModal() {
    const modal = document.getElementById('intakeModal');
    modal.classList.remove('active');
    document.body.style.overflow = 'auto';
  }

  // Close modal when clicking outside the content
  document.getElementById('intakeModal').addEventListener('click', function(e) {
    if (e.target === this) {
      closeIntakeModal();
    }
  });


  </script>
    
    </body>
    </html>