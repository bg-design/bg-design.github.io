<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Neon Chain â€” Centered Column Layout + Chain Swing</title>
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      background: #000;
      margin: 0;
      height: 100vh;
      display: flex;
      flex-direction: column;       /* force vertical stack */
      justify-content: center;
      align-items: center;
      overflow: hidden;
      position: relative;
      font-family: 'Dancing Script', cursive;
    }

    /* Ambient glow */
    .ambient-glow {
      position: absolute; inset: 0;
      background: radial-gradient(circle at center, #ff66cc33, transparent 70%);
      filter: blur(100px);
      animation: ambientPulse 6s ease-in-out infinite;
      z-index: 0;
    }
    @keyframes ambientPulse {
      0%,100% { opacity: 0.3; }
      50%     { opacity: 0.6; }
    }

    /* Party lights */
    .party-lights {
      position: absolute; inset: 0;
      background: repeating-conic-gradient(
        red   0deg 30deg, orange 30deg 60deg,
        yellow 60deg 90deg, green 90deg 120deg,
        blue 120deg 150deg, indigo 150deg 180deg,
        violet 180deg 210deg, red 210deg 240deg
      );
      mix-blend-mode: screen;
      filter: blur(250px) brightness(0.6);
      animation: spin 10s linear infinite;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: 0;
    }
    @keyframes spin {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }

    /* Neon text */
    .neon-text {
      font-size: 4rem; line-height: 1.2;
      color: #ff66cc; text-align: center;
      text-shadow:
        0 0 20px #ff66cc,
        0 0 40px #ff66cc,
        0 0 80px #ff66cc,
        0 0 160px #ff66cc;
      position: relative; z-index: 2;
      white-space: pre-line; transition: all 0.3s ease;
    }
    .neon-text::after {
      content: "";
      position: absolute; width: 100%; height: 100%;
      bottom: -40px;
      background: radial-gradient(ellipse at bottom, #ff66cc44 0%, transparent 80%);
      transform: scaleY(-1); filter: blur(30px); z-index: -1;
    }
    .neon-text.off {
      color: transparent;
      text-shadow:
        0 0 5px  #804070,
        0 0 10px #804070,
        0 0 20px #804070;
    }
    .neon-text.party {
      animation: rainbow 4s linear infinite;
    }
    @keyframes rainbow {
      0%   { color: red;    text-shadow: 0 0 20px red; }
      20%  { color: orange; text-shadow: 0 0 20px orange; }
      40%  { color: yellow; text-shadow: 0 0 20px yellow; }
      60%  { color: green;  text-shadow: 0 0 20px green; }
      80%  { color: blue;   text-shadow: 0 0 20px blue; }
      100% { color: violet; text-shadow: 0 0 20px violet; }
    }

    /* Chain-only idle swing */
    @keyframes idleSwing {
      0%,100% { transform: rotate(-5deg); }
      50%     { transform: rotate( 5deg); }
    }
    .swing-container {
      animation: idleSwing 6s ease-in-out infinite;
      transform-origin: top center;
      pointer-events: none;
    }

    /* Chain & receptacle */
    .chain-wrapper {
      position: relative;
      margin-top: 30px;
      width: 40px;
      z-index: 2;
    }
    .receptacle {
      position: absolute; top: 0; left: 50%;
      transform: translateX(-50%);
      width: 20px; height: 20px;
      background: #666; border-radius: 4px;
    }
    .beads-wrapper {
      position: relative; width: 40px; height: 160px;
      overflow: hidden; margin: 20px auto 0;
    }
    .chain {
      position: absolute; top: -80px; left: 50%;
      transform: translateX(-50%);
      display: flex; flex-direction: column; align-items: center; gap: 4px;
      transition: transform 0.15s ease; cursor: pointer;
      pointer-events: auto;
    }
    .chain.pull-up { transition-duration: 0.3s; }
    .bead {
      width: 6px; height: 6px; background: #bbb; border-radius: 50%;
    }
    .knob {
      width: 24px; height: 24px; background: #999; border-radius: 50%;
      box-shadow: inset -2px -2px 4px rgba(0,0,0,0.4); margin-top: 5px;
    }

    /* Sparks canvas */
    canvas {
      position: absolute; inset: 0; pointer-events: none; z-index: 1;
    }
  </style>
</head>
<body>

  <div class="ambient-glow"></div>
  <div class="party-lights" id="partyLights"></div>

  <div id="sign" class="neon-text">
    This is where<br>the magic<br>happens
  </div>

  <div class="chain-wrapper">
    <div class="receptacle"></div>
    <div class="beads-wrapper">
      <div class="swing-container">
        <div id="chain" class="chain">
          <div class="bead"></div><div class="bead"></div><div class="bead"></div>
          <div class="bead"></div><div class="bead"></div><div class="bead"></div>
          <div class="bead"></div><div class="bead"></div><div class="bead"></div>
          <div class="bead"></div><div class="bead"></div><div class="bead"></div>
          <div class="knob"></div>
        </div>
      </div>
    </div>
  </div>

  <canvas id="sparks"></canvas>
  <audio id="chainSound"  src="https://assets.mixkit.co/sfx/preview/mixkit-metal-chain-clink-610.mp3"></audio>
  <audio id="crackleSound" src="https://assets.mixkit.co/sfx/preview/mixkit-electric-zap-608.mp3"></audio>

  <script>
    const sign        = document.getElementById('sign'),
          chain       = document.getElementById('chain'),
          partyLights = document.getElementById('partyLights'),
          canvas      = document.getElementById('sparks'),
          ctx         = canvas.getContext('2d'),
          chainSound  = document.getElementById('chainSound'),
          crackle     = document.getElementById('crackleSound');

    let isOn = true,
        party = false,
        hue = 0,
        sparks = [];

    function resize() {
      canvas.width  = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resize);
    resize();

    (function draw() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      sparks.forEach((s,i) => {
        ctx.globalAlpha = s.life;
        ctx.fillStyle   = s.color;
        ctx.beginPath(); ctx.arc(s.x,s.y,4,0,2*Math.PI); ctx.fill();
        s.x += s.dx; s.y += s.dy; s.life -= 0.02;
        if (s.life <= 0) sparks.splice(i,1);
      });
      if (party) {
        hue = (hue + 1) % 360;
        sign.style.filter = `hue-rotate(${hue}deg)`;
      }
      requestAnimationFrame(draw);
    })();

    function addSparks(n=100) {
      for (let i = 0; i < n; i++) {
        sparks.push({
          x: canvas.width/2,
          y: canvas.height/2 - 100,
          dx: (Math.random() - 0.5)*10,
          dy: (Math.random() - 0.5)*10,
          life: 1,
          color: `hsl(${Math.random()*360},100%,70%)`
        });
      }
    }

    let fId, rId, osc, driftId;
    function startFlicker() {
      (function lf() {
        if (!isOn) return;
        sign.style.opacity = 0.9 + Math.random()*0.1;
        fId = requestAnimationFrame(lf);
      })();
      (function rf() {
        if (!isOn) return;
        sign.style.opacity = 0.5;
        setTimeout(() => sign.style.opacity = 1, 80);
        rId = setTimeout(rf, 5000 + Math.random()*4000);
      })();
    }
    function stopFlicker() {
      cancelAnimationFrame(fId);
      clearTimeout(rId);
      sign.style.opacity = 1;
    }

    function startHum() {
      const A = new (window.AudioContext || window.webkitAudioContext)();
      osc = A.createOscillator();
      const g = A.createGain();
      osc.type = 'sawtooth';
      osc.frequency.value = 60;
      g.gain.value = 0.02;
      osc.connect(g).connect(A.destination);
      osc.start();
      (function df() {
        osc.frequency.value += (Math.random() - 0.5)*0.2;
        driftId = requestAnimationFrame(df);
      })();
    }
    function stopHum() {
      if (osc) osc.stop();
      cancelAnimationFrame(driftId);
    }

    function pull() {
      chain.classList.add('pull-down');
      chain.style.transform = 'translateX(-50%) translateY(80px)';
      setTimeout(() => {
        chain.classList.remove('pull-down');
        chain.classList.add('pull-up');
        chain.style.transform = 'translateX(-50%) translateY(0)';
        setTimeout(() => chain.classList.remove('pull-up'), 300);
      }, 150);
      chainSound.currentTime = 0;
      chainSound.play();
    }

    let clicks = 0, t;
    chain.addEventListener('click', () => {
      clicks++;
      if (clicks === 2) {
        pull();
        party = !party;
        partyLights.style.opacity = party ? 1 : 0;
        sign.classList.toggle('party', party);
        if (party) {
          if (!isOn) {
            sign.classList.remove('off');
            crackle.currentTime = 0; crackle.play();
            addSparks(); startFlicker(); startHum();
            isOn = true;
          }
        } else {
          sign.classList.remove('party');
          sign.style.filter = 'none';
        }
        clearTimeout(t);
        clicks = 0;
      } else {
        clearTimeout(t);
        t = setTimeout(() => {
          pull();
          if (party) {
            party = false;
            partyLights.style.opacity = 0;
            sign.classList.remove('party');
            sign.classList.add('off');
            sign.style.filter = 'none';
            stopFlicker(); stopHum(); isOn = false;
          } else {
            chainSound.currentTime = 0; chainSound.play();
            if (isOn) {
              sign.classList.add('off'); stopFlicker(); stopHum();
            } else {
              sign.classList.remove('off');
              crackle.currentTime = 0; crackle.play();
              addSparks(); startFlicker(); startHum();
            }
            isOn = !isOn;
          }
          clicks = 0;
        }, 300);
      }
    });
  </script>
</body>
</html>